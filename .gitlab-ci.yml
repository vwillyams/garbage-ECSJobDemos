stages:
  - validation
  - test
  - build
  - run

################################################################################
# macOS validation for 2018.1
################################################################################
schedule:validation:2018.1:
  stage: validation
  script:
    - python Tools/CI/validation.py --build-version '2018.1.*&latest=true' --package-path Samples/Packages/com.unity.entities --package-path Samples/Packages/com.unity.jobs --package-path Samples/Packages/com.unity.collections
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for 2018.1
################################################################################
schedule:windows:test:2018.1:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:validation:2018.1


################################################################################
# windows build for 2018.1
################################################################################
schedule:windows:build:Samples:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-mono.log -cleanedLogFile output-windows-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1


schedule:windows:build:twostickshooter-classic:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-mono.log -cleanedLogFile output-windows-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1


schedule:windows:build:twostickshooter-hybrid:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1


schedule:windows:build:twostickshooter-pure:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-mono.log -cleanedLogFile output-windows-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1


schedule:windows:build:Samples:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-il2cpp.log -cleanedLogFile output-windows-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1


schedule:windows:build:twostickshooter-classic:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1


schedule:windows:build:twostickshooter-hybrid:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1


schedule:windows:build:twostickshooter-pure:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1


################################################################################
# windows run for 2018.1
################################################################################
schedule:windows:run:Samples:mono:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-Samples-run-mono.log -cleanedLogFile output-windows-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:Samples:mono:2018.1


schedule:windows:run:twostickshooter-classic:mono:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Classic/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-mono.log -cleanedLogFile output-windows-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-classic:mono:2018.1


schedule:windows:run:twostickshooter-hybrid:mono:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Hybrid/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-hybrid:mono:2018.1


schedule:windows:run:twostickshooter-pure:mono:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Pure/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-mono.log -cleanedLogFile output-windows-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-pure:mono:2018.1


schedule:windows:run:Samples:il2cpp:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-Samples-run-il2cpp.log -cleanedLogFile output-windows-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:Samples:il2cpp:2018.1


schedule:windows:run:twostickshooter-classic:il2cpp:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Classic/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-classic:il2cpp:2018.1


schedule:windows:run:twostickshooter-hybrid:il2cpp:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Hybrid/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-hybrid:il2cpp:2018.1


schedule:windows:run:twostickshooter-pure:il2cpp:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Pure/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-pure:il2cpp:2018.1


################################################################################
# macOS test for 2018.1
################################################################################
schedule:macOS:test:2018.1:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:validation:2018.1


################################################################################
# macOS build for 2018.1
################################################################################
schedule:macOS:build:Samples:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-mono.log -cleanedLogFile output-macOS-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1


schedule:macOS:build:twostickshooter-classic:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1


schedule:macOS:build:twostickshooter-hybrid:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1


schedule:macOS:build:twostickshooter-pure:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1


schedule:macOS:build:Samples:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-il2cpp.log -cleanedLogFile output-macOS-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1


schedule:macOS:build:twostickshooter-classic:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1


schedule:macOS:build:twostickshooter-hybrid:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1


schedule:macOS:build:twostickshooter-pure:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1


################################################################################
# macOS run for 2018.1
################################################################################
schedule:macOS:run:Samples:mono:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-Samples-run-mono.log -cleanedLogFile output-macOS-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:Samples:mono:2018.1


schedule:macOS:run:twostickshooter-classic:mono:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Classic/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-classic:mono:2018.1


schedule:macOS:run:twostickshooter-hybrid:mono:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Hybrid/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-hybrid:mono:2018.1


schedule:macOS:run:twostickshooter-pure:mono:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Pure/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-pure:mono:2018.1


schedule:macOS:run:Samples:il2cpp:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-Samples-run-il2cpp.log -cleanedLogFile output-macOS-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:Samples:il2cpp:2018.1


schedule:macOS:run:twostickshooter-classic:il2cpp:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Classic/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-classic:il2cpp:2018.1


schedule:macOS:run:twostickshooter-hybrid:il2cpp:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Hybrid/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-hybrid:il2cpp:2018.1


schedule:macOS:run:twostickshooter-pure:il2cpp:2018.1:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Pure/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-pure:il2cpp:2018.1


################################################################################
# macOS validation for 2018.2
################################################################################
schedule:validation:2018.2:
  stage: validation
  script:
    - python Tools/CI/validation.py --build-version '2018.2.*&latest=true' --package-path Samples/Packages/com.unity.entities --package-path Samples/Packages/com.unity.jobs --package-path Samples/Packages/com.unity.collections
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for 2018.2
################################################################################
schedule:windows:test:2018.2:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:validation:2018.2


################################################################################
# windows build for 2018.2
################################################################################
schedule:windows:build:Samples:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-mono.log -cleanedLogFile output-windows-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2


schedule:windows:build:twostickshooter-classic:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-mono.log -cleanedLogFile output-windows-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2


schedule:windows:build:twostickshooter-hybrid:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2


schedule:windows:build:twostickshooter-pure:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-mono.log -cleanedLogFile output-windows-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2


schedule:windows:build:Samples:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-il2cpp.log -cleanedLogFile output-windows-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2


schedule:windows:build:twostickshooter-classic:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2


schedule:windows:build:twostickshooter-hybrid:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2


schedule:windows:build:twostickshooter-pure:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2


################################################################################
# windows run for 2018.2
################################################################################
schedule:windows:run:Samples:mono:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-Samples-run-mono.log -cleanedLogFile output-windows-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:Samples:mono:2018.2


schedule:windows:run:twostickshooter-classic:mono:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Classic/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-mono.log -cleanedLogFile output-windows-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-classic:mono:2018.2


schedule:windows:run:twostickshooter-hybrid:mono:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Hybrid/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-hybrid:mono:2018.2


schedule:windows:run:twostickshooter-pure:mono:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Pure/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-mono.log -cleanedLogFile output-windows-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-pure:mono:2018.2


schedule:windows:run:Samples:il2cpp:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-Samples-run-il2cpp.log -cleanedLogFile output-windows-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:Samples:il2cpp:2018.2


schedule:windows:run:twostickshooter-classic:il2cpp:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Classic/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-classic:il2cpp:2018.2


schedule:windows:run:twostickshooter-hybrid:il2cpp:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Hybrid/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-hybrid:il2cpp:2018.2


schedule:windows:run:twostickshooter-pure:il2cpp:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Pure/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-pure:il2cpp:2018.2


################################################################################
# macOS test for 2018.2
################################################################################
schedule:macOS:test:2018.2:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:validation:2018.2


################################################################################
# macOS build for 2018.2
################################################################################
schedule:macOS:build:Samples:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-mono.log -cleanedLogFile output-macOS-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2


schedule:macOS:build:twostickshooter-classic:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2


schedule:macOS:build:twostickshooter-hybrid:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2


schedule:macOS:build:twostickshooter-pure:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2


schedule:macOS:build:Samples:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-il2cpp.log -cleanedLogFile output-macOS-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2


schedule:macOS:build:twostickshooter-classic:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2


schedule:macOS:build:twostickshooter-hybrid:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2


schedule:macOS:build:twostickshooter-pure:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2


################################################################################
# macOS run for 2018.2
################################################################################
schedule:macOS:run:Samples:mono:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-Samples-run-mono.log -cleanedLogFile output-macOS-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:Samples:mono:2018.2


schedule:macOS:run:twostickshooter-classic:mono:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Classic/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-classic:mono:2018.2


schedule:macOS:run:twostickshooter-hybrid:mono:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Hybrid/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-hybrid:mono:2018.2


schedule:macOS:run:twostickshooter-pure:mono:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Pure/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-pure:mono:2018.2


schedule:macOS:run:Samples:il2cpp:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-Samples-run-il2cpp.log -cleanedLogFile output-macOS-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:Samples:il2cpp:2018.2


schedule:macOS:run:twostickshooter-classic:il2cpp:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Classic/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-classic:il2cpp:2018.2


schedule:macOS:run:twostickshooter-hybrid:il2cpp:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Hybrid/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-hybrid:il2cpp:2018.2


schedule:macOS:run:twostickshooter-pure:il2cpp:2018.2:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Pure/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-pure:il2cpp:2018.2


################################################################################
# macOS validation for 2018.1_staging
################################################################################
schedule:validation:2018.1_staging:
  stage: validation
  script:
    - python Tools/CI/validation.py --build-version '2018.1/staging&latest=true' --package-path Samples/Packages/com.unity.entities --package-path Samples/Packages/com.unity.jobs --package-path Samples/Packages/com.unity.collections
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for 2018.1_staging
################################################################################
schedule:windows:test:2018.1_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:validation:2018.1_staging


################################################################################
# windows build for 2018.1_staging
################################################################################
schedule:windows:build:Samples:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-mono.log -cleanedLogFile output-windows-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1_staging


schedule:windows:build:twostickshooter-classic:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-mono.log -cleanedLogFile output-windows-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1_staging


schedule:windows:build:twostickshooter-hybrid:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1_staging


schedule:windows:build:twostickshooter-pure:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-mono.log -cleanedLogFile output-windows-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1_staging


schedule:windows:build:Samples:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-il2cpp.log -cleanedLogFile output-windows-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1_staging


schedule:windows:build:twostickshooter-classic:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1_staging


schedule:windows:build:twostickshooter-hybrid:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1_staging


schedule:windows:build:twostickshooter-pure:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.1_staging


################################################################################
# windows run for 2018.1_staging
################################################################################
schedule:windows:run:Samples:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-Samples-run-mono.log -cleanedLogFile output-windows-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:Samples:mono:2018.1_staging


schedule:windows:run:twostickshooter-classic:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Classic/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-mono.log -cleanedLogFile output-windows-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-classic:mono:2018.1_staging


schedule:windows:run:twostickshooter-hybrid:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Hybrid/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-hybrid:mono:2018.1_staging


schedule:windows:run:twostickshooter-pure:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Pure/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-mono.log -cleanedLogFile output-windows-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-pure:mono:2018.1_staging


schedule:windows:run:Samples:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-Samples-run-il2cpp.log -cleanedLogFile output-windows-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:Samples:il2cpp:2018.1_staging


schedule:windows:run:twostickshooter-classic:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Classic/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-classic:il2cpp:2018.1_staging


schedule:windows:run:twostickshooter-hybrid:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Hybrid/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-hybrid:il2cpp:2018.1_staging


schedule:windows:run:twostickshooter-pure:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Pure/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-pure:il2cpp:2018.1_staging


################################################################################
# macOS test for 2018.1_staging
################################################################################
schedule:macOS:test:2018.1_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:validation:2018.1_staging


################################################################################
# macOS build for 2018.1_staging
################################################################################
schedule:macOS:build:Samples:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-mono.log -cleanedLogFile output-macOS-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1_staging


schedule:macOS:build:twostickshooter-classic:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1_staging


schedule:macOS:build:twostickshooter-hybrid:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1_staging


schedule:macOS:build:twostickshooter-pure:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1_staging


schedule:macOS:build:Samples:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-il2cpp.log -cleanedLogFile output-macOS-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1_staging


schedule:macOS:build:twostickshooter-classic:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1_staging


schedule:macOS:build:twostickshooter-hybrid:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1_staging


schedule:macOS:build:twostickshooter-pure:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.1_staging


################################################################################
# macOS run for 2018.1_staging
################################################################################
schedule:macOS:run:Samples:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-Samples-run-mono.log -cleanedLogFile output-macOS-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:Samples:mono:2018.1_staging


schedule:macOS:run:twostickshooter-classic:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Classic/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-classic:mono:2018.1_staging


schedule:macOS:run:twostickshooter-hybrid:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Hybrid/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-hybrid:mono:2018.1_staging


schedule:macOS:run:twostickshooter-pure:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Pure/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-pure:mono:2018.1_staging


schedule:macOS:run:Samples:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-Samples-run-il2cpp.log -cleanedLogFile output-macOS-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:Samples:il2cpp:2018.1_staging


schedule:macOS:run:twostickshooter-classic:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Classic/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-classic:il2cpp:2018.1_staging


schedule:macOS:run:twostickshooter-hybrid:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Hybrid/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-hybrid:il2cpp:2018.1_staging


schedule:macOS:run:twostickshooter-pure:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Pure/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-pure:il2cpp:2018.1_staging


################################################################################
# macOS validation for 2018.2_staging
################################################################################
schedule:validation:2018.2_staging:
  stage: validation
  script:
    - python Tools/CI/validation.py --build-version '2018.2/staging&latest=true' --package-path Samples/Packages/com.unity.entities --package-path Samples/Packages/com.unity.jobs --package-path Samples/Packages/com.unity.collections
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for 2018.2_staging
################################################################################
schedule:windows:test:2018.2_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:validation:2018.2_staging


################################################################################
# windows build for 2018.2_staging
################################################################################
schedule:windows:build:Samples:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-mono.log -cleanedLogFile output-windows-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2_staging


schedule:windows:build:twostickshooter-classic:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-mono.log -cleanedLogFile output-windows-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2_staging


schedule:windows:build:twostickshooter-hybrid:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2_staging


schedule:windows:build:twostickshooter-pure:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-mono.log -cleanedLogFile output-windows-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2_staging


schedule:windows:build:Samples:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-il2cpp.log -cleanedLogFile output-windows-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2_staging


schedule:windows:build:twostickshooter-classic:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2_staging


schedule:windows:build:twostickshooter-hybrid:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2_staging


schedule:windows:build:twostickshooter-pure:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:test:2018.2_staging


################################################################################
# windows run for 2018.2_staging
################################################################################
schedule:windows:run:Samples:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-Samples-run-mono.log -cleanedLogFile output-windows-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:Samples:mono:2018.2_staging


schedule:windows:run:twostickshooter-classic:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Classic/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-mono.log -cleanedLogFile output-windows-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-classic:mono:2018.2_staging


schedule:windows:run:twostickshooter-hybrid:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Hybrid/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-hybrid:mono:2018.2_staging


schedule:windows:run:twostickshooter-pure:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Pure/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-mono.log -cleanedLogFile output-windows-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-pure:mono:2018.2_staging


schedule:windows:run:Samples:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-Samples-run-il2cpp.log -cleanedLogFile output-windows-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:Samples:il2cpp:2018.2_staging


schedule:windows:run:twostickshooter-classic:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Classic/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-classic:il2cpp:2018.2_staging


schedule:windows:run:twostickshooter-hybrid:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Hybrid/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-hybrid:il2cpp:2018.2_staging


schedule:windows:run:twostickshooter-pure:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable TwoStickShooter/Pure/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:windows:build:twostickshooter-pure:il2cpp:2018.2_staging


################################################################################
# macOS test for 2018.2_staging
################################################################################
schedule:macOS:test:2018.2_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:validation:2018.2_staging


################################################################################
# macOS build for 2018.2_staging
################################################################################
schedule:macOS:build:Samples:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-mono.log -cleanedLogFile output-macOS-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2_staging


schedule:macOS:build:twostickshooter-classic:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2_staging


schedule:macOS:build:twostickshooter-hybrid:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2_staging


schedule:macOS:build:twostickshooter-pure:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2_staging


schedule:macOS:build:Samples:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-il2cpp.log -cleanedLogFile output-macOS-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2_staging


schedule:macOS:build:twostickshooter-classic:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2_staging


schedule:macOS:build:twostickshooter-hybrid:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2_staging


schedule:macOS:build:twostickshooter-pure:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  only:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:test:2018.2_staging


################################################################################
# macOS run for 2018.2_staging
################################################################################
schedule:macOS:run:Samples:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-Samples-run-mono.log -cleanedLogFile output-macOS-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:Samples:mono:2018.2_staging


schedule:macOS:run:twostickshooter-classic:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Classic/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-classic:mono:2018.2_staging


schedule:macOS:run:twostickshooter-hybrid:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Hybrid/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-hybrid:mono:2018.2_staging


schedule:macOS:run:twostickshooter-pure:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Pure/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-pure:mono:2018.2_staging


schedule:macOS:run:Samples:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-Samples-run-il2cpp.log -cleanedLogFile output-macOS-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:Samples:il2cpp:2018.2_staging


schedule:macOS:run:twostickshooter-classic:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Classic/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-classic:il2cpp:2018.2_staging


schedule:macOS:run:twostickshooter-hybrid:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Hybrid/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-hybrid:il2cpp:2018.2_staging


schedule:macOS:run:twostickshooter-pure:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable TwoStickShooter/Pure/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - schedule:macOS:build:twostickshooter-pure:il2cpp:2018.2_staging


################################################################################
# macOS validation for 2018.1_staging
################################################################################
validation:2018.1_staging:
  stage: validation
  script:
    - python Tools/CI/validation.py --build-version '2018.1/staging&latest=true' --package-path Samples/Packages/com.unity.entities --package-path Samples/Packages/com.unity.jobs --package-path Samples/Packages/com.unity.collections
  except:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for 2018.1_staging
################################################################################
windows:test:2018.1_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.1_staging


################################################################################
# windows build for 2018.1_staging
################################################################################
windows:build:Samples:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-mono.log -cleanedLogFile output-windows-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:Samples:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-il2cpp.log -cleanedLogFile output-windows-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


################################################################################
# windows run for 2018.1_staging
################################################################################
windows:run:Samples:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-Samples-run-mono.log -cleanedLogFile output-windows-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:Samples:mono:2018.1_staging


windows:run:Samples:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-Samples-run-il2cpp.log -cleanedLogFile output-windows-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:Samples:il2cpp:2018.1_staging


################################################################################
# macOS test for 2018.1_staging
################################################################################
macOS:test:2018.1_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.1_staging


################################################################################
# macOS build for 2018.1_staging
################################################################################
macOS:build:Samples:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-mono.log -cleanedLogFile output-macOS-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:Samples:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-il2cpp.log -cleanedLogFile output-macOS-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


################################################################################
# macOS run for 2018.1_staging
################################################################################
macOS:run:Samples:mono:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-Samples-run-mono.log -cleanedLogFile output-macOS-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:Samples:mono:2018.1_staging


macOS:run:Samples:il2cpp:2018.1_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-Samples-run-il2cpp.log -cleanedLogFile output-macOS-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:Samples:il2cpp:2018.1_staging


################################################################################
# macOS validation for 2018.2_staging
################################################################################
validation:2018.2_staging:
  stage: validation
  script:
    - python Tools/CI/validation.py --build-version '2018.2/staging&latest=true' --package-path Samples/Packages/com.unity.entities --package-path Samples/Packages/com.unity.jobs --package-path Samples/Packages/com.unity.collections
  except:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for 2018.2_staging
################################################################################
windows:test:2018.2_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  allow_failure: true
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.2_staging


################################################################################
# windows build for 2018.2_staging
################################################################################
windows:build:Samples:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-mono.log -cleanedLogFile output-windows-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2_staging


windows:build:Samples:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  allow_failure: true
  tags:
  - windows
  - buildfarm
  - "10"
  script:
    - .UnityLauncher.Editor\win10-x64\publish\UnityLauncher.Editor.exe -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-Samples-build-il2cpp.log -cleanedLogFile output-windows-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2_staging


################################################################################
# windows run for 2018.2_staging
################################################################################
windows:run:Samples:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-Samples-run-mono.log -cleanedLogFile output-windows-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:Samples:mono:2018.2_staging


windows:run:Samples:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  - gamecode
  script:
    - .UnityLauncher.Player\win10-x64\publish\UnityLauncher.Player.exe -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-Samples-run-il2cpp.log -cleanedLogFile output-windows-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-windows-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:Samples:il2cpp:2018.2_staging


################################################################################
# macOS test for 2018.2_staging
################################################################################
macOS:test:2018.2_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.2_staging


################################################################################
# macOS build for 2018.2_staging
################################################################################
macOS:build:Samples:mono:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-mono.log -cleanedLogFile output-macOS-Samples-build-mono-cleaned.log -quit -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2_staging


macOS:build:Samples:il2cpp:2018.2_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py Editor
  after_script:
    - python Tools/CI/afterscript.py
  except:
    - schedules
  allow_failure: true
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Editor/osx.10.12-x64/publish/UnityLauncher.Editor -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-Samples-build-il2cpp.log -cleanedLogFile output-macOS-Samples-build-il2cpp-cleaned.log -quit -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2_staging


################################################################################
# macOS run for 2018.2_staging
################################################################################
macOS:run:Samples:mono:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-Samples-run-mono.log -cleanedLogFile output-macOS-Samples-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:Samples:mono:2018.2_staging


macOS:run:Samples:il2cpp:2018.2_staging:
  before_script:
    - python Tools/CI/beforescript.py Player
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - darwin
  - buildfarm
  - 10.13.3
  script:
    - ./.UnityLauncher.Player/osx.10.12-x64/publish/UnityLauncher.Player -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-Samples-run-il2cpp.log -cleanedLogFile output-macOS-Samples-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 1800
  artifacts:
    name: "artifacts-macOS-Samples"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:Samples:il2cpp:2018.2_staging


