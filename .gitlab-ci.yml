stages:
  - validation
  - test
  - build
  - run

################################################################################
# windows validation for 2018.1
################################################################################
validation:2018.1:
  stage: validation
  script:
    - python Tools/CI/validation.py "2018.1.*&latest=true"
  only:
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for 2018.1
################################################################################
windows:test:2018.1:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.1


################################################################################
# windows build for 2018.1
################################################################################
windows:build:boids:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-boids-build-mono.log -cleanedLogFile output-windows-boids-build-mono-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:chains:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-chains-build-mono.log -cleanedLogFile output-windows-chains-build-mono-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:hierarchy:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-hierarchy-build-mono.log -cleanedLogFile output-windows-hierarchy-build-mono-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:rotation:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-rotation-build-mono.log -cleanedLogFile output-windows-rotation-build-mono-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:twostickshooter-classic:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-mono.log -cleanedLogFile output-windows-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:twostickshooter-hybrid:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:twostickshooter-pure:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-mono.log -cleanedLogFile output-windows-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:boids:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-boids-build-il2cpp.log -cleanedLogFile output-windows-boids-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:chains:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-chains-build-il2cpp.log -cleanedLogFile output-windows-chains-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:hierarchy:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-hierarchy-build-il2cpp.log -cleanedLogFile output-windows-hierarchy-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:rotation:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-rotation-build-il2cpp.log -cleanedLogFile output-windows-rotation-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:twostickshooter-classic:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:twostickshooter-hybrid:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


windows:build:twostickshooter-pure:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1


################################################################################
# windows run for 2018.1
################################################################################
windows:run:boids:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-boids-run-mono.log -cleanedLogFile output-windows-boids-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:boids:mono:2018.1


windows:run:chains:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-chains-run-mono.log -cleanedLogFile output-windows-chains-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:chains:mono:2018.1


windows:run:hierarchy:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-hierarchy-run-mono.log -cleanedLogFile output-windows-hierarchy-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:hierarchy:mono:2018.1


windows:run:rotation:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-rotation-run-mono.log -cleanedLogFile output-windows-rotation-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:rotation:mono:2018.1


windows:run:twostickshooter-classic:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-mono.log -cleanedLogFile output-windows-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-classic:mono:2018.1


windows:run:twostickshooter-hybrid:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-hybrid:mono:2018.1


windows:run:twostickshooter-pure:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-mono.log -cleanedLogFile output-windows-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-pure:mono:2018.1


windows:run:boids:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-boids-run-il2cpp.log -cleanedLogFile output-windows-boids-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:boids:il2cpp:2018.1


windows:run:chains:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-chains-run-il2cpp.log -cleanedLogFile output-windows-chains-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:chains:il2cpp:2018.1


windows:run:hierarchy:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-hierarchy-run-il2cpp.log -cleanedLogFile output-windows-hierarchy-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:hierarchy:il2cpp:2018.1


windows:run:rotation:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-rotation-run-il2cpp.log -cleanedLogFile output-windows-rotation-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:rotation:il2cpp:2018.1


windows:run:twostickshooter-classic:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-classic:il2cpp:2018.1


windows:run:twostickshooter-hybrid:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-hybrid:il2cpp:2018.1


windows:run:twostickshooter-pure:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-pure:il2cpp:2018.1


################################################################################
# macOS validation for 2018.1
################################################################################
validation:2018.1:
  stage: validation
  script:
    - python Tools/CI/validation.py '2018.1.*&latest=true'
  only:
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# macOS test for 2018.1
################################################################################
macOS:test:2018.1:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.1


################################################################################
# macOS build for 2018.1
################################################################################
macOS:build:boids:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-boids-build-mono.log -cleanedLogFile output-macOS-boids-build-mono-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:chains:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-chains-build-mono.log -cleanedLogFile output-macOS-chains-build-mono-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:hierarchy:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-hierarchy-build-mono.log -cleanedLogFile output-macOS-hierarchy-build-mono-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:rotation:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-rotation-build-mono.log -cleanedLogFile output-macOS-rotation-build-mono-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:twostickshooter-classic:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:twostickshooter-hybrid:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:twostickshooter-pure:mono:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:boids:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-boids-build-il2cpp.log -cleanedLogFile output-macOS-boids-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:chains:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-chains-build-il2cpp.log -cleanedLogFile output-macOS-chains-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:hierarchy:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-hierarchy-build-il2cpp.log -cleanedLogFile output-macOS-hierarchy-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:rotation:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-rotation-build-il2cpp.log -cleanedLogFile output-macOS-rotation-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:twostickshooter-classic:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:twostickshooter-hybrid:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


macOS:build:twostickshooter-pure:il2cpp:2018.1:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1


################################################################################
# macOS run for 2018.1
################################################################################
macOS:run:boids:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-boids-run-mono.log -cleanedLogFile output-macOS-boids-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:boids:mono:2018.1


macOS:run:chains:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-chains-run-mono.log -cleanedLogFile output-macOS-chains-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:chains:mono:2018.1


macOS:run:hierarchy:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-hierarchy-run-mono.log -cleanedLogFile output-macOS-hierarchy-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:hierarchy:mono:2018.1


macOS:run:rotation:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-rotation-run-mono.log -cleanedLogFile output-macOS-rotation-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:rotation:mono:2018.1


macOS:run:twostickshooter-classic:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-classic:mono:2018.1


macOS:run:twostickshooter-hybrid:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-hybrid:mono:2018.1


macOS:run:twostickshooter-pure:mono:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-pure:mono:2018.1


macOS:run:boids:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-boids-run-il2cpp.log -cleanedLogFile output-macOS-boids-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:boids:il2cpp:2018.1


macOS:run:chains:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-chains-run-il2cpp.log -cleanedLogFile output-macOS-chains-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:chains:il2cpp:2018.1


macOS:run:hierarchy:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-hierarchy-run-il2cpp.log -cleanedLogFile output-macOS-hierarchy-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:hierarchy:il2cpp:2018.1


macOS:run:rotation:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-rotation-run-il2cpp.log -cleanedLogFile output-macOS-rotation-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:rotation:il2cpp:2018.1


macOS:run:twostickshooter-classic:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-classic:il2cpp:2018.1


macOS:run:twostickshooter-hybrid:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-hybrid:il2cpp:2018.1


macOS:run:twostickshooter-pure:il2cpp:2018.1:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-pure:il2cpp:2018.1


################################################################################
# windows validation for 2018.2
################################################################################
validation:2018.2:
  stage: validation
  script:
    - python Tools/CI/validation.py "2018.2.*&latest=true"
  only:
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for 2018.2
################################################################################
windows:test:2018.2:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.2


################################################################################
# windows build for 2018.2
################################################################################
windows:build:boids:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-boids-build-mono.log -cleanedLogFile output-windows-boids-build-mono-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:chains:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-chains-build-mono.log -cleanedLogFile output-windows-chains-build-mono-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:hierarchy:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-hierarchy-build-mono.log -cleanedLogFile output-windows-hierarchy-build-mono-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:rotation:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-rotation-build-mono.log -cleanedLogFile output-windows-rotation-build-mono-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:twostickshooter-classic:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-mono.log -cleanedLogFile output-windows-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:twostickshooter-hybrid:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:twostickshooter-pure:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-mono.log -cleanedLogFile output-windows-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:boids:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-boids-build-il2cpp.log -cleanedLogFile output-windows-boids-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:chains:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-chains-build-il2cpp.log -cleanedLogFile output-windows-chains-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:hierarchy:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-hierarchy-build-il2cpp.log -cleanedLogFile output-windows-hierarchy-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:rotation:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-rotation-build-il2cpp.log -cleanedLogFile output-windows-rotation-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:twostickshooter-classic:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:twostickshooter-hybrid:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


windows:build:twostickshooter-pure:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.2.*&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.2.*&latest=true"
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.2


################################################################################
# windows run for 2018.2
################################################################################
windows:run:boids:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-boids-run-mono.log -cleanedLogFile output-windows-boids-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:boids:mono:2018.2


windows:run:chains:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-chains-run-mono.log -cleanedLogFile output-windows-chains-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:chains:mono:2018.2


windows:run:hierarchy:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-hierarchy-run-mono.log -cleanedLogFile output-windows-hierarchy-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:hierarchy:mono:2018.2


windows:run:rotation:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-rotation-run-mono.log -cleanedLogFile output-windows-rotation-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:rotation:mono:2018.2


windows:run:twostickshooter-classic:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-mono.log -cleanedLogFile output-windows-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-classic:mono:2018.2


windows:run:twostickshooter-hybrid:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-hybrid:mono:2018.2


windows:run:twostickshooter-pure:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-mono.log -cleanedLogFile output-windows-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-pure:mono:2018.2


windows:run:boids:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-boids-run-il2cpp.log -cleanedLogFile output-windows-boids-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:boids:il2cpp:2018.2


windows:run:chains:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-chains-run-il2cpp.log -cleanedLogFile output-windows-chains-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:chains:il2cpp:2018.2


windows:run:hierarchy:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-hierarchy-run-il2cpp.log -cleanedLogFile output-windows-hierarchy-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:hierarchy:il2cpp:2018.2


windows:run:rotation:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-rotation-run-il2cpp.log -cleanedLogFile output-windows-rotation-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:rotation:il2cpp:2018.2


windows:run:twostickshooter-classic:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-classic:il2cpp:2018.2


windows:run:twostickshooter-hybrid:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-hybrid:il2cpp:2018.2


windows:run:twostickshooter-pure:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-pure:il2cpp:2018.2


################################################################################
# macOS validation for 2018.2
################################################################################
validation:2018.2:
  stage: validation
  script:
    - python Tools/CI/validation.py '2018.2.*&latest=true'
  only:
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# macOS test for 2018.2
################################################################################
macOS:test:2018.2:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.2


################################################################################
# macOS build for 2018.2
################################################################################
macOS:build:boids:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-boids-build-mono.log -cleanedLogFile output-macOS-boids-build-mono-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:chains:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-chains-build-mono.log -cleanedLogFile output-macOS-chains-build-mono-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:hierarchy:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-hierarchy-build-mono.log -cleanedLogFile output-macOS-hierarchy-build-mono-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:rotation:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-rotation-build-mono.log -cleanedLogFile output-macOS-rotation-build-mono-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:twostickshooter-classic:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:twostickshooter-hybrid:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:twostickshooter-pure:mono:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:boids:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-boids-build-il2cpp.log -cleanedLogFile output-macOS-boids-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:chains:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-chains-build-il2cpp.log -cleanedLogFile output-macOS-chains-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:hierarchy:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-hierarchy-build-il2cpp.log -cleanedLogFile output-macOS-hierarchy-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:rotation:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-rotation-build-il2cpp.log -cleanedLogFile output-macOS-rotation-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:twostickshooter-classic:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:twostickshooter-hybrid:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


macOS:build:twostickshooter-pure:il2cpp:2018.2:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.2.*&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.2.*&latest=true'
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.2


################################################################################
# macOS run for 2018.2
################################################################################
macOS:run:boids:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-boids-run-mono.log -cleanedLogFile output-macOS-boids-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:boids:mono:2018.2


macOS:run:chains:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-chains-run-mono.log -cleanedLogFile output-macOS-chains-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:chains:mono:2018.2


macOS:run:hierarchy:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-hierarchy-run-mono.log -cleanedLogFile output-macOS-hierarchy-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:hierarchy:mono:2018.2


macOS:run:rotation:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-rotation-run-mono.log -cleanedLogFile output-macOS-rotation-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:rotation:mono:2018.2


macOS:run:twostickshooter-classic:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-classic:mono:2018.2


macOS:run:twostickshooter-hybrid:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-hybrid:mono:2018.2


macOS:run:twostickshooter-pure:mono:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-pure:mono:2018.2


macOS:run:boids:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-boids-run-il2cpp.log -cleanedLogFile output-macOS-boids-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:boids:il2cpp:2018.2


macOS:run:chains:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-chains-run-il2cpp.log -cleanedLogFile output-macOS-chains-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:chains:il2cpp:2018.2


macOS:run:hierarchy:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-hierarchy-run-il2cpp.log -cleanedLogFile output-macOS-hierarchy-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:hierarchy:il2cpp:2018.2


macOS:run:rotation:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-rotation-run-il2cpp.log -cleanedLogFile output-macOS-rotation-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:rotation:il2cpp:2018.2


macOS:run:twostickshooter-classic:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-classic:il2cpp:2018.2


macOS:run:twostickshooter-hybrid:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-hybrid:il2cpp:2018.2


macOS:run:twostickshooter-pure:il2cpp:2018.2:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  only:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-pure:il2cpp:2018.2


################################################################################
# windows validation for 2018.1_staging
################################################################################
validation:2018.1_staging:
  stage: validation
  script:
    - python Tools/CI/validation.py "2018.1/staging&latest=true"
  except:
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for 2018.1_staging
################################################################################
windows:test:2018.1_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.1_staging


################################################################################
# windows build for 2018.1_staging
################################################################################
windows:build:boids:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-boids-build-mono.log -cleanedLogFile output-windows-boids-build-mono-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:chains:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-chains-build-mono.log -cleanedLogFile output-windows-chains-build-mono-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:hierarchy:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-hierarchy-build-mono.log -cleanedLogFile output-windows-hierarchy-build-mono-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:rotation:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-rotation-build-mono.log -cleanedLogFile output-windows-rotation-build-mono-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:twostickshooter-classic:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-mono.log -cleanedLogFile output-windows-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:twostickshooter-hybrid:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:twostickshooter-pure:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-mono.log -cleanedLogFile output-windows-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:boids:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-boids-build-il2cpp.log -cleanedLogFile output-windows-boids-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:chains:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-chains-build-il2cpp.log -cleanedLogFile output-windows-chains-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:hierarchy:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-hierarchy-build-il2cpp.log -cleanedLogFile output-windows-hierarchy-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:rotation:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-rotation-build-il2cpp.log -cleanedLogFile output-windows-rotation-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:twostickshooter-classic:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:twostickshooter-hybrid:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


windows:build:twostickshooter-pure:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "2018.1/staging&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "2018.1/staging&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:test:2018.1_staging


################################################################################
# windows run for 2018.1_staging
################################################################################
windows:run:boids:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-boids-run-mono.log -cleanedLogFile output-windows-boids-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:boids:mono:2018.1_staging


windows:run:chains:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-chains-run-mono.log -cleanedLogFile output-windows-chains-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:chains:mono:2018.1_staging


windows:run:hierarchy:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-hierarchy-run-mono.log -cleanedLogFile output-windows-hierarchy-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:hierarchy:mono:2018.1_staging


windows:run:rotation:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-rotation-run-mono.log -cleanedLogFile output-windows-rotation-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:rotation:mono:2018.1_staging


windows:run:twostickshooter-classic:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-mono.log -cleanedLogFile output-windows-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-classic:mono:2018.1_staging


windows:run:twostickshooter-hybrid:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-hybrid:mono:2018.1_staging


windows:run:twostickshooter-pure:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-mono.log -cleanedLogFile output-windows-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-pure:mono:2018.1_staging


windows:run:boids:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-boids-run-il2cpp.log -cleanedLogFile output-windows-boids-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:boids:il2cpp:2018.1_staging


windows:run:chains:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-chains-run-il2cpp.log -cleanedLogFile output-windows-chains-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:chains:il2cpp:2018.1_staging


windows:run:hierarchy:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-hierarchy-run-il2cpp.log -cleanedLogFile output-windows-hierarchy-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:hierarchy:il2cpp:2018.1_staging


windows:run:rotation:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-rotation-run-il2cpp.log -cleanedLogFile output-windows-rotation-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:rotation:il2cpp:2018.1_staging


windows:run:twostickshooter-classic:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-classic:il2cpp:2018.1_staging


windows:run:twostickshooter-hybrid:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-hybrid:il2cpp:2018.1_staging


windows:run:twostickshooter-pure:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-pure:il2cpp:2018.1_staging


################################################################################
# macOS validation for 2018.1_staging
################################################################################
validation:2018.1_staging:
  stage: validation
  script:
    - python Tools/CI/validation.py '2018.1/staging&latest=true'
  except:
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# macOS test for 2018.1_staging
################################################################################
macOS:test:2018.1_staging:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:2018.1_staging


################################################################################
# macOS build for 2018.1_staging
################################################################################
macOS:build:boids:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-boids-build-mono.log -cleanedLogFile output-macOS-boids-build-mono-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:chains:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-chains-build-mono.log -cleanedLogFile output-macOS-chains-build-mono-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:hierarchy:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-hierarchy-build-mono.log -cleanedLogFile output-macOS-hierarchy-build-mono-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:rotation:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-rotation-build-mono.log -cleanedLogFile output-macOS-rotation-build-mono-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:twostickshooter-classic:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:twostickshooter-hybrid:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:twostickshooter-pure:mono:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:boids:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-boids-build-il2cpp.log -cleanedLogFile output-macOS-boids-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:chains:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-chains-build-il2cpp.log -cleanedLogFile output-macOS-chains-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:hierarchy:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-hierarchy-build-il2cpp.log -cleanedLogFile output-macOS-hierarchy-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:rotation:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-rotation-build-il2cpp.log -cleanedLogFile output-macOS-rotation-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:twostickshooter-classic:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:twostickshooter-hybrid:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


macOS:build:twostickshooter-pure:il2cpp:2018.1_staging:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py '2018.1/staging&latest=true'
  after_script:
    - python Tools/CI/afterscript.py '2018.1/staging&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:2018.1_staging


################################################################################
# macOS run for 2018.1_staging
################################################################################
macOS:run:boids:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-boids-run-mono.log -cleanedLogFile output-macOS-boids-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:boids:mono:2018.1_staging


macOS:run:chains:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-chains-run-mono.log -cleanedLogFile output-macOS-chains-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:chains:mono:2018.1_staging


macOS:run:hierarchy:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-hierarchy-run-mono.log -cleanedLogFile output-macOS-hierarchy-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:hierarchy:mono:2018.1_staging


macOS:run:rotation:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-rotation-run-mono.log -cleanedLogFile output-macOS-rotation-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:rotation:mono:2018.1_staging


macOS:run:twostickshooter-classic:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-classic:mono:2018.1_staging


macOS:run:twostickshooter-hybrid:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-hybrid:mono:2018.1_staging


macOS:run:twostickshooter-pure:mono:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-pure:mono:2018.1_staging


macOS:run:boids:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-boids-run-il2cpp.log -cleanedLogFile output-macOS-boids-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:boids:il2cpp:2018.1_staging


macOS:run:chains:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-chains-run-il2cpp.log -cleanedLogFile output-macOS-chains-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:chains:il2cpp:2018.1_staging


macOS:run:hierarchy:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-hierarchy-run-il2cpp.log -cleanedLogFile output-macOS-hierarchy-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:hierarchy:il2cpp:2018.1_staging


macOS:run:rotation:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-rotation-run-il2cpp.log -cleanedLogFile output-macOS-rotation-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:rotation:il2cpp:2018.1_staging


macOS:run:twostickshooter-classic:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-classic:il2cpp:2018.1_staging


macOS:run:twostickshooter-hybrid:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-hybrid:il2cpp:2018.1_staging


macOS:run:twostickshooter-pure:il2cpp:2018.1_staging:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-pure:il2cpp:2018.1_staging


################################################################################
# windows validation for trunk
################################################################################
validation:trunk:
  stage: validation
  script:
    - python Tools/CI/validation.py "trunk&latest=true"
  except:
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# windows test for trunk
################################################################################
windows:test:trunk:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-windows-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-windows-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:trunk


################################################################################
# windows build for trunk
################################################################################
windows:build:boids:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-boids-build-mono.log -cleanedLogFile output-windows-boids-build-mono-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:chains:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-chains-build-mono.log -cleanedLogFile output-windows-chains-build-mono-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:hierarchy:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-hierarchy-build-mono.log -cleanedLogFile output-windows-hierarchy-build-mono-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:rotation:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-rotation-build-mono.log -cleanedLogFile output-windows-rotation-build-mono-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:twostickshooter-classic:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-mono.log -cleanedLogFile output-windows-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:twostickshooter-hybrid:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:twostickshooter-pure:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/mono/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-mono.log -cleanedLogFile output-windows-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:boids:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-boids-build-il2cpp.log -cleanedLogFile output-windows-boids-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:chains:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-chains-build-il2cpp.log -cleanedLogFile output-windows-chains-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:hierarchy:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-hierarchy-build-il2cpp.log -cleanedLogFile output-windows-hierarchy-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:rotation:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath Samples -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-rotation-build-il2cpp.log -cleanedLogFile output-windows-rotation-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:twostickshooter-classic:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Classic -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:twostickshooter-hybrid:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Hybrid -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


windows:build:twostickshooter-pure:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py "trunk&latest=true"
  after_script:
    - python Tools/CI/afterscript.py "trunk&latest=true"
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.exe" -projectpath TwoStickShooter/Pure -batchmode -buildWindows64Player build/il2cpp/windows-standalone.exe -nographics -silentcrashes -automated -logfile output-windows-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:test:trunk


################################################################################
# windows run for trunk
################################################################################
windows:run:boids:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-boids-run-mono.log -cleanedLogFile output-windows-boids-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:boids:mono:trunk


windows:run:chains:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-chains-run-mono.log -cleanedLogFile output-windows-chains-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:chains:mono:trunk


windows:run:hierarchy:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-hierarchy-run-mono.log -cleanedLogFile output-windows-hierarchy-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:hierarchy:mono:trunk


windows:run:rotation:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/windows-standalone.exe -logfile output-windows-rotation-run-mono.log -cleanedLogFile output-windows-rotation-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:rotation:mono:trunk


windows:run:twostickshooter-classic:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-mono.log -cleanedLogFile output-windows-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-classic:mono:trunk


windows:run:twostickshooter-hybrid:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-hybrid:mono:trunk


windows:run:twostickshooter-pure:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/mono/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-mono.log -cleanedLogFile output-windows-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-pure:mono:trunk


windows:run:boids:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-boids-run-il2cpp.log -cleanedLogFile output-windows-boids-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:boids:il2cpp:trunk


windows:run:chains:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-chains-run-il2cpp.log -cleanedLogFile output-windows-chains-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:chains:il2cpp:trunk


windows:run:hierarchy:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-hierarchy-run-il2cpp.log -cleanedLogFile output-windows-hierarchy-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:hierarchy:il2cpp:trunk


windows:run:rotation:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/windows-standalone.exe -logfile output-windows-rotation-run-il2cpp.log -cleanedLogFile output-windows-rotation-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - windows:build:rotation:il2cpp:trunk


windows:run:twostickshooter-classic:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-classic:il2cpp:trunk


windows:run:twostickshooter-hybrid:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-hybrid:il2cpp:trunk


windows:run:twostickshooter-pure:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - windows
  script:
    - dotnet C:/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/il2cpp/windows-standalone.exe -logfile output-windows-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-windows-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-windows-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - windows:build:twostickshooter-pure:il2cpp:trunk


################################################################################
# macOS validation for trunk
################################################################################
validation:trunk:
  stage: validation
  script:
    - python Tools/CI/validation.py 'trunk&latest=true'
  except:
  artifacts:
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
    expire_in: 1 week

################################################################################
# macOS test for trunk
################################################################################
macOS:test:trunk:
  stage: test
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -silentcrashes -automated -logfile output-macOS-test.log -runtests -testresults results.xml
  artifacts:
    name: "artifacts-macOS-test"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - validation:trunk


################################################################################
# macOS build for trunk
################################################################################
macOS:build:boids:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-boids-build-mono.log -cleanedLogFile output-macOS-boids-build-mono-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:chains:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-chains-build-mono.log -cleanedLogFile output-macOS-chains-build-mono-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:hierarchy:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-hierarchy-build-mono.log -cleanedLogFile output-macOS-hierarchy-build-mono-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:rotation:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-rotation-build-mono.log -cleanedLogFile output-macOS-rotation-build-mono-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:twostickshooter-classic:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:twostickshooter-hybrid:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:twostickshooter-pure:mono:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/mono/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-build-mono-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend mono -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:boids:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-boids-build-il2cpp.log -cleanedLogFile output-macOS-boids-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/BoidExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:chains:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-chains-build-il2cpp.log -cleanedLogFile output-macOS-chains-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/ChainExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:hierarchy:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-hierarchy-build-il2cpp.log -cleanedLogFile output-macOS-hierarchy-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/HierarchyExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:rotation:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath Samples -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-rotation-build-il2cpp.log -cleanedLogFile output-macOS-rotation-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/RotationExample.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:twostickshooter-classic:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Classic -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-classic-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickClassic.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:twostickshooter-hybrid:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Hybrid -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-hybrid-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickHybrid.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


macOS:build:twostickshooter-pure:il2cpp:trunk:
  stage: build
  before_script:
    - python Tools/CI/beforescript.py 'trunk&latest=true'
  after_script:
    - python Tools/CI/afterscript.py 'trunk&latest=true'
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Editor/bin/Debug/netcoreapp2.0/UnityLauncher.Editor.dll -unityexecutable ".Editor/Unity.app/Contents/MacOS/Unity" -projectpath TwoStickShooter/Pure -batchmode -buildOSXUniversalPlayer build/il2cpp/macOS-standalone.app -nographics -silentcrashes -automated -logfile output-macOS-twostickshooter-pure-build-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-build-il2cpp-cleaned.log -quit -scene Assets/Scenes/TwoStickPure.unity -scriptingBackend il2cpp -displayResolutionDialog disabled
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:test:trunk


################################################################################
# macOS run for trunk
################################################################################
macOS:run:boids:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-boids-run-mono.log -cleanedLogFile output-macOS-boids-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:boids:mono:trunk


macOS:run:chains:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-chains-run-mono.log -cleanedLogFile output-macOS-chains-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:chains:mono:trunk


macOS:run:hierarchy:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-hierarchy-run-mono.log -cleanedLogFile output-macOS-hierarchy-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:hierarchy:mono:trunk


macOS:run:rotation:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/mono/macOS-standalone.app -logfile output-macOS-rotation-run-mono.log -cleanedLogFile output-macOS-rotation-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:rotation:mono:trunk


macOS:run:twostickshooter-classic:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-mono.log -cleanedLogFile output-macOS-twostickshooter-classic-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-classic:mono:trunk


macOS:run:twostickshooter-hybrid:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-mono.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-hybrid:mono:trunk


macOS:run:twostickshooter-pure:mono:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/mono/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-mono.log -cleanedLogFile output-macOS-twostickshooter-pure-run-mono-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-pure:mono:trunk


macOS:run:boids:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-boids-run-il2cpp.log -cleanedLogFile output-macOS-boids-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-boids"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:boids:il2cpp:trunk


macOS:run:chains:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-chains-run-il2cpp.log -cleanedLogFile output-macOS-chains-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-chains"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:chains:il2cpp:trunk


macOS:run:hierarchy:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-hierarchy-run-il2cpp.log -cleanedLogFile output-macOS-hierarchy-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-hierarchy"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:hierarchy:il2cpp:trunk


macOS:run:rotation:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable Samples/build/il2cpp/macOS-standalone.app -logfile output-macOS-rotation-run-il2cpp.log -cleanedLogFile output-macOS-rotation-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-rotation"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "Samples/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:rotation:il2cpp:trunk


macOS:run:twostickshooter-classic:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Classic/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-classic-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-classic-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-classic"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Classic/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-classic:il2cpp:trunk


macOS:run:twostickshooter-hybrid:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Hybrid/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-hybrid-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-hybrid-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-hybrid"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Hybrid/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-hybrid:il2cpp:trunk


macOS:run:twostickshooter-pure:il2cpp:trunk:
  variables:
    GIT_STRATEGY: fetch
  stage: run
  except:
    - schedules
  tags:
  - macOS
  script:
    - dotnet ~/unity-log-wrapper/UnityLauncher.Player/bin/Debug/netcoreapp2.0/UnityLauncher.Player.dll -executable TwoStickShooter/Pure/build/il2cpp/macOS-standalone.app -logfile output-macOS-twostickshooter-pure-run-il2cpp.log -cleanedLogFile output-macOS-twostickshooter-pure-run-il2cpp-cleaned.log -enforceEmptyCleanedLogFile -timeout 120 -timeoutIgnore
  artifacts:
    name: "artifacts-macOS-twostickshooter-pure"
    when: always
    paths:
      - "unity_revision.txt"
      - "*.log"
      - "*.xml"
      - "TwoStickShooter/Pure/build"
    expire_in: 1 week
  dependencies:
    - macOS:build:twostickshooter-pure:il2cpp:trunk


